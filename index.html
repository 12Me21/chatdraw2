<!doctype html><html lang=en-QS><meta charset=utf-8><meta name=viewport content="width=device-width, height=device-height, initial-scale=1" id=$meta_viewport>
<title>CHATDRAW 2!!!</title>
<link rel=icon sizes=16x16 href=favicon.gif>
<style>
	html, body {
		position: fixed;
		overflow: clip; overflow: hidden;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		word-break: break-word;
	}
	pre {
		white-space: pre-wrap;
	}
	body {
		display: flex;
		flex-flow: column;
	}
	chat-draw {
		align-self: flex-start;
	}
</style>


<!-- preload to prevent flash of unstyled -->
<link rel=preload href=style.css as=style>
<!--<link rel=preload href=deco.css as=style>-->

<script src=brush.js></script>
<script src=chatdraw.js></script>

<form method=dialog>
	<label>Scale: <input name=scale type=number min=1 max=10 value=2 id=$scale size=3 onchange="chatdraw.set_scale(value/devicePixelRatio)"></label>
	<label style=color:goldenrod>Last stroke: <i id=$stroke></i></label>
</form>
<hr>
<chat-draw></chat-draw>
<hr>

<script>
	let IOS_SAFARI = CSS.supports('-webkit-touch-callout', 'none')
	// disable the automatic zoom when focusing text inputs in safari
	if (IOS_SAFARI)
		$meta_viewport.content += ", user-scalable=no"
	
	let $stroke = window.$stroke
	
	let chatdraw = document.querySelector('chat-draw')
	$scale.onchange()
</script>

<div>
	testing:
	<textarea id=$code></textarea>
	<button onclick="$log.textContent='...';$log.textContent=String(eval($code.value))">run</button>
	<pre id=$log></pre>
</div>
